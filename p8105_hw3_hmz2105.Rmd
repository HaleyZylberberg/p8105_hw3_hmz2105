---
title: "p8105_hw3_hmz2105"
author: Haley Zylberberg
output: github_document
---

```{r setup}
library (tidyverse)
```

##Problem 2

```{r call in data for problem 2}
library (p8105.datasets)
brfss_smart2010
```


##Problem 3

This problem includes data from NHANES regarding participant demographic information and accelerometer data.

Import demographic data. Skip first 4 rows as they are notes. Remove participants younger than 21 and those with missing data. Recode sex as 1= male and 2= female and education as 1=less than high school, 2= high school, 3=more than high school. Next convert education to a factor.

```{r import and tidy demographic data}
Demographic_df = 
  read_csv("data/nhanes_covar.csv", skip = 4) |> 
  janitor::clean_names()|>
  filter(age > 21) |>
  drop_na() |>
  mutate(
 sex = case_match(
    sex, 2~ 'female', 1 ~ 'male'),
 education = case_match(
   education, 1 ~ "less than high school", 2 ~ "high school", 3~ "more than high school")) |> mutate (education = as.factor(education))
```

Next, import and tidy accelerometer data.

```{r import and tidy accelerometer data}
accel_df = 
  read_csv("data/nhanes_accel.csv")|> 
  janitor::clean_names() 
```

Merge datasets.

```{r merge}
MIMS_df = 
  inner_join(Demographic_df, accel_df, by="seqn")
```

Next determine the number of men and women in each education level. Represent this data in both table and visual format.

```{r calculate number of men and women per education level }
MIMS_df |> 
  group_by(sex, education) |> 
  janitor::tabyl(sex, education) |> 
  knitr::kable(digits = 2)

ggplot(MIMS_df, aes(x = education, fill = sex)) +
  geom_bar(position = "dodge") +
  labs(title = "Count of Men and Women by Education Level",
       x = "Education Level",
       y = "Count") +
  viridis::scale_fill_viridis(
    name = "Education", 
    discrete = TRUE) + 
  theme_minimal() + 
  theme(legend.position = "bottom")
```

Majority of men and women in this dataset have more than a high school degree (n=59 for women and n=54 for men). More men had less than a high school degree than women (34 vs 23).

Create a total activity variable for each participant by summing up the accelerometer data for the day.

```{r calculate total_activity variable}

```